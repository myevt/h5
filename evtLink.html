<html>
    <head>
        <title>evtLink</title>
        <meta name="viewport" content="width=device-width,target-densitydpi=high-dpi,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <style>
            body {
                margin: 1.5rem;
                background-color: #3d226d;
                color: white;
                font-size: 90%;
            }
            pre, pre * {
                white-space:pre-wrap;
                white-space:-moz-pre-wrap;
                white-space:-pre-wrap;
                white-space:-o-pre-wrap;
                word-wrap:break-word;
                font-family: "Source Code Pro", 'Courier New', Courier, monospace;
            }
            button {
                background-color:blueviolet;
                color: white;
                font-size: 1.1rem;
                border: none;
                outline: none;
                padding: .5rem;
            }
            .scanzone-wraper  {
                background-color: white;
                border-radius: 8px;
            }
            p, h1, h2 {
                margin: 0;
                padding: 0;
                color: rgb(240, 240, 240);
            }
        </style>
    </head>
    <body>
        <script type="text/javascript" src="js/evt.js"></script>
        <h2 id="head_mark"></h2>
        <p id="head_info"></p>
        <blockquote><code></code></blockquote>
        <!--<button onclick="generatePass()">GeneratePass</button>-->
        <br>
        <div class="scanzone-wraper">
            <div id="destroyed_info" style="display: none;background: #f5d7d7; border-top-left-radius: 8px; border-top-right-radius: 8px; padding: .6rem .9rem; color: black; font-size: 80%; border-top: 2px red solid;">The token will be <b>destroyed</b> instantly after scanned!</div>
            <image id="pass" style="display: block; box-sizing: border-box; padding: 1rem 2rem; width: 100%;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAegAAAHoCAYAAACCUHwMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAe9SURBVHhe7dUxAQAgDMCwgX/PwIGIHslTCV3nGQAgZf8CACEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNAEEGDQBBBg0AQQYNADkzF8WlB8zy/kk+AAAAAElFTkSuQmCC"></image>
            <div style="text-align: center; background: #f5f5f5; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; padding: .6rem .9rem; color: black; font-size: 80%; border-top: 1px #f2f2f2 solid;">Will refresh automatically every 5s</div>
        </div>
        
        <pre style="text-align: center; max-width: 400px; color: rgb(210, 210, 210)">ONLY FOR USE FACE-TO-FACE
OR BEING SCANNED BY CORRECT SCANNERS
NEVER SHOW IT TO ANY OTHER PEOPLE</pre>
        <script>
            function evtLink(qrType, qrParams, imgPrams) {
                imgPrams = imgPrams || {autoReload: true}
                setInfo(qrType, qrParams)
                try {
                    EVT.EvtLink.getEVTLinkQrImage(qrType, qrParams, imgPrams, 
                        function(err, res) {
                            if (err) {
                                alert(err.message);
                                return;
                            }
                            // canvas: document.getElementById("canvas"), 
                            document.getElementById("pass").setAttribute("src", res.dataUrl);
                            console.log(res.rawText);
                            // EVT.EvtLink.parseEvtLink(res.rawText).then(function(res) {
                            //     console.log(JSON.stringify(res, null, 4))
                            // });
                            // document.getElementById("passText").innerHTML = res.rawText.substr(8);
                    });
                }
                catch(e) {
                    alert(e.message);
                }
            }

            function setInfo(qrType, qrParams) {
                var headInfo='', headMark='';
                switch (qrType) {
                    case "everiPass":
                        headInfo = "Token: " + qrParams.tokenName + "   Domain: " + qrParams.domainName;
                        if (qrParams.autoDestroying) {
                            document.getElementById("destroyed_info").style.display="block";
                        }
                        break;
                    case "everiPay":
                        // var info = qrParams.symbol.split(",")
                        // headInfo = "Max payment: "+(qrParams.maxAmount / Math.pow(10,info[0])) + " " + info[1];
                        break;
                
                    default:
                        break;
                }
                document.getElementById("head_mark").innerHTML=headMark;
                document.getElementById("head_info").innerHTML=headInfo;
            }
        </script>

        <script src="js/evt.js" crossorigin="anonymous" defer></script>
    </body>
</html>